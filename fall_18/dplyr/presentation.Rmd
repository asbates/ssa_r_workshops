---
title: "SSA R Coding Workshop 2"
subtitle: "Data Cleaning & Manipulation With Dplyr"
author: "Andrew Bates"
output: ioslides_presentation
---


## This Workshop

> - Core functions of  `dplyr`
> - Other useful functions as time permits

## The Data 

> - Review of burritos in San Diego
> - Project of [Scott Cole](https://srcole.github.io/100burritos/), a neuroscience student at UCSD
> - Find it
>     - on his [website](https://github.com/asbates/ssa_r_workshops/tree/master/fall_18/data)
>     - or [Kaggle](https://www.kaggle.com/srcole/burritos-in-san-diego/version/2#burritos_01022018.csv)


## Setup

 - Download the burrito data
     - Make sure you know where it is
 - Run the following code:

```{r setup_shown, eval = FALSE}
install.packages("dplyr", "readr") # readr is for reading in data
library(dplyr)
library(readr)
dirty_burrito <- read_csv("path/to/file/burritos_01022018.csv")
```
     
```{r setup_hidden, echo = FALSE, message = FALSE, warning = FALSE}
library(dplyr)
library(readr)
library(here)
dirty_burrito <- read_csv(here("fall_18", "data", "burritos_01022018.csv"))

```


## First Look

```{r first_look_print}
dirty_burrito[, 1:10]
```

## First Look
```{r first_look_names}
names(dirty_burrito)
```


## Some Issues

> - There are problems with some names:
>     - `readr` already took care of one issue (2 `Salsa` columns)
>     - Spaces in names are not very R friendly (`Mass (g)`)
>     - `Bell peper` is spelled wrong
>     - Inconsistent naming scheme (capitalization)
> - There are some `NA` values (not necessarily a problem)
> - `Chips` encoding is not so obvious
> - What's the difference between `Tortilla` and `Wrap`?

## Fixing The Issues

> - To simplify things, let's start by:
>     - `select`ing just a few variables to work with
>     - and `rename`ing them

## Selecting Variables of Interest

```{r select_vars}
clean_burrito <- dirty_burrito %>%
  select(Location,
         Burrito,
         Yelp,
         Google,
         Cost,
         `Mass (g)`,
         Tortilla,
         Meat,
         Synergy,
         overall,
         Beans)
```

## Selecting Variables of Interest
```{r clean_first_pass}
clean_burrito
```


## Rename Variables

```{r rename}
clean_burrito <- clean_burrito %>%
  rename(
    location = Location,
    burrito = Burrito,
    yelp_rating = Yelp,
    google_rating = Google,
    cost = Cost,
    mass = `Mass (g)`,
    tortilla = Tortilla,
    meat = Meat,
    synergy = Synergy,
    overall_rating = overall,
    beans = Beans
  )
```

## Rename Variables

```{r}
clean_burrito
```

## Quiz 1

> - What does `select` do?
>     - `select`s variables (columns)
> - What does `rename` do?
>     - This should be obvious
> - What does `%>%` do?
>     - The 'pipe' operator
>     - From the package `magrittr`. Comes with `dplyr`
>     - Improves readability of code
>         - `x %>% h %>% g %>% f` instead of `f(g(h(x)))`
>         - "Take x. Apply the function h. Then g. Then f."
>     - First argument is always the data
>     - Allows for easy chaining of operations on data frame
